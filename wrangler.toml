# =================================================================================
# Flux-AI-Pro Cloudflare Workers 配置
# =================================================================================

name = "fluxaipor1"
main = "src/index.js"
compatibility_date = "2024-12-01"
node_compat = true

# Workers 資源限制
workers_dev = true
route = ""
zone_id = ""

# 環境變數（使用 wrangler secret 設置敏感信息）
[vars]
PROJECT_NAME = "Flux-AI-Pro"
PROJECT_VERSION = "9.6.1-extended-styles-shadcn-complete"

# =================================================================================
# R2 存儲桶綁定（圖片永久存儲）
# =================================================================================
[[r2_buckets]]
binding = "IMAGES_BUCKET"
bucket_name = "flux-ai-images"
preview_bucket_name = "flux-ai-images-preview"

# =================================================================================
# KV 命名空間綁定（圖片元數據存儲）
# =================================================================================
[[kv_namespaces]]
binding = "IMAGE_METADATA"
id = "YOUR_KV_NAMESPACE_ID"
preview_id = "YOUR_KV_PREVIEW_NAMESPACE_ID"

# =================================================================================
# Workers AI 綁定（可選：用於翻譯）
# =================================================================================
[ai]
binding = "AI"

# =================================================================================
# 限制和配額
# =================================================================================
[limits]
cpu_ms = 50000

# =================================================================================
# 開發環境配置
# =================================================================================
[env.dev]
name = "flux-ai-pro-dev"
workers_dev = true

[env.dev.vars]
ENVIRONMENT = "development"

# =================================================================================
# 生產環境配置
# =================================================================================
[env.production]
name = "flux-ai-pro-production"
workers_dev = false

[env.production.vars]
ENVIRONMENT = "production"

# =================================================================================
# 構建配置
# =================================================================================
[build]
command = ""
watch_dirs = ["src"]

[build.upload]
format = "service-worker"
